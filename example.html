 <!DOCTYPE html>
<html>
  <head>
    <title>Mouse Posyx</title>
  </head>

  <body>
    X Position: <input type="text" id="x_pos">
    Y Position: <input type="text" id="y_pos">
    <input type="submit" id="button" value="Submit">
    <p id="num"></p>
  </body>

  <script>
    // connection parts
    var socket = new WebSocket( "ws://" + document.domain + ':' + location.port, "mouse-protocol" );
    function update(msg) { document.getElementById("num").innerHTML = msg; }
    socket.onopen = function() { console.log("socket open"); update("open"); }
    socket.onclose = function() { console.log("socket close"); update("closed"); }
    socket.onmessage = function(msg) { console.log("socket message: " + msg.data); update(msg.data); }

    button = document.querySelector('#button');
    button.addEventListener('click', function (e) {
      var x = document.querySelector('#x_pos').value;
      var y = document.querySelector('#y_pos').value;

      socket.send(x+"@"+y);
    });

    function stress_test() {
      var limit = 100000;

      for (i=0; i < limit; i++) {
        var value1 = Math.floor(Math.random() * 1920);
        var value2 = Math.floor(Math.random() * 1080);
        socket.send(value1+"@"+value2);
      }
    }
  </script>
</html>
